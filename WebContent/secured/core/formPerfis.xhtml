<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/templateComMenu.xhtml">

	<ui:define name="content">

		<p:fieldset
			legend="#{msgs.mantem} #{msgs.perfis} : #{perfilFormBack.perfil.nome}"
			style="margin-bottom:20px">

			<h:form id="perfisForm">

				<p:tabView id="tab-view-perfil" activeIndex="0" dynamic="false"
					cache="false">

					<p:tab id="tab0-perfil" title="#{msgs.perfil}"
						disabled="#{permissao.disabled('PERFIL_EDITAR_ABA_PERFIL')}">

						<p:panelGrid columns="3">

							<p:outputLabel class="control-label" for="nome"
								value="#{msgs.nome}:" />
							<p:inputText id="nome" value="#{perfilFormBack.perfil.nome}"
								required="true" maxlength="60" />
							<p:message for="nome" />

							<p:outputLabel class="control-label" for="descricao"
								value="#{msgs.descricao}:" />
							<p:inputText id="descricao"
								value="#{perfilFormBack.perfil.descricao}" maxlength="60" />
							<p:message for="descricao" />

							<p:outputLabel class="control-label" for="interno"
								value="#{msgs.interno}:" />
							<p:selectBooleanCheckbox id="interno"
								value="#{perfilFormBack.perfil.interno}" />
							<p:message for="interno" />

							<p:outputLabel class="control-label" for="ativo"
								value="#{msgs.ativo}:" />
							<p:selectBooleanCheckbox id="ativo"
								value="#{perfilFormBack.perfil.ativo}" />
							<p:message for="ativo" />
						</p:panelGrid>

					</p:tab>

					<p:tab id="tab1-perfil" title="#{msgs.permissoes}"
						disabled="#{permissao.disabled('PERFIL_EDITAR_ABA_PERMISSAO')}">

						<p:commandButton value="#{msgs.expandir}"
							update="permissoes-panel-tree" process="@this"
							actionListener="#{perfilFormBack.expandir}" />
						<p:commandButton value="#{msgs.contrair}"
							update="permissoes-panel-tree" process="@this"
							actionListener="#{perfilFormBack.contrair}" />
						<p:commandButton value="#{msgs.marcar_todos}"
							update="permissoes-panel-tree" process="@this"
							actionListener="#{perfilFormBack.marcarTodos}" />
						<p:commandButton value="#{msgs.desmarcar_todos}"
							update="permissoes-panel-tree" process="@this"
							actionListener="#{perfilFormBack.desmarcarTodos}" />
						<h:panelGroup layout="block" id="permissoes-panel-tree"
							style="margin-top: 10px !important;">
							<p:tree id="arvore-permissoes"
								value="#{perfilFormBack.permissionTree.root}"
								style="width: 100%; height:500px; overflow: auto;display: block "
								var="node" selectionMode="checkbox"
								selection="#{perfilFormBack.selecionados}">
								<p:treeNode>
									<h:outputText value="#{node.nome} - #{node.tipo.nome}" />
								</p:treeNode>
							</p:tree>
						</h:panelGroup>
					</p:tab>
				</p:tabView>

				<p:commandButton value="#{msgs.salvar}"
					action="#{perfilFormBack.salva}"
					rendered="#{permissao.rendered('PERFIL_EDITAR_SALVAR')}"
					ajax="false">
					<f:param name="first" value="#{perfilFormBack.first}" />
					<f:param name="nro" value="#{perfilFormBack.nroRegistrosPorPagina}" />
				</p:commandButton>

				<p:commandButton value="#{msgs.voltar}"
					action="#{perfilFormBack.listagem}" ajax="false" immediate="true">
					<f:param name="first" value="#{perfilFormBack.first}" />
					<f:param name="nro" value="#{perfilFormBack.nroRegistrosPorPagina}" />
				</p:commandButton>

			</h:form>
		</p:fieldset>
	</ui:define>
</ui:composition>
