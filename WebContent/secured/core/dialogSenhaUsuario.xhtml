<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<p:dialog header="#{msgs.password_alteracao}" widgetVar="alteraSenha"
	closable="false" resizable="false" modal="true"
	style="background-color: #e1e1e1;">

	<h:form id="usuarioSenhaForm">

		<p:messages id="messages" showDetail="true" closable="true" />

		<p:panelGrid columns="3">

			<p:outputLabel for="empresa" value="#{msgs.empresa}:" />
			<h:outputLabel id="empresa"
				value="#{dialogSenhaBack.usuario.empresa.nome}" />
			<p:message for="empresa" />

			<p:outputLabel for="nome" value="#{msgs.nome}:" />
			<p:outputLabel id="nome" value="#{dialogSenhaBack.usuario.nome}" />
			<p:message for="nome" />

			<p:outputLabel for="login" value="#{msgs.login}:" />
			<p:outputLabel id="login" value="#{dialogSenhaBack.usuario.login}" />
			<p:message for="login" />

			<p:outputLabel for="pwd0" value="#{msgs.password_atual}:" rendered="#{not dialogSenhaBack.usuarioDiferenteLogado}"/>
			<p:inputText id="pwd0" value="#{dialogSenhaBack.senhaAtual}"
				label="#{msgs.password_atual}" type="password" autocomplete="off"
				name="password" rendered="#{not dialogSenhaBack.usuarioDiferenteLogado}"/>
			<p:message for="pwd0" rendered="#{not dialogSenhaBack.usuarioDiferenteLogado}"/>
			
			<p:outputLabel for="pwd1" value="#{msgs.password_nova}:" />
			<p:password id="pwd1" value="#{dialogSenhaBack.novaSenha}"
				match="pwd2" label="#{msgs.password}" name="password"
				required="true" />
			<p:message for="pwd1" />

			<p:outputLabel for="pwd2" value="#{msgs.password_confirm}:" />
			<p:password id="pwd2" value="#{dialogSenhaBack.novaSenha}"
				label="#{msgs.password_confirm}" name="password" required="true" />
			<p:message for="pwd2" />

		</p:panelGrid>

		<p:commandButton value="#{msgs.salvar}"
			actionListener="#{dialogSenhaBack.alteraSenha}" ajax="true"
			update="@form" />
		<p:commandButton value="#{msgs.cancelar}"
			oncomplete="PF('alteraSenha').hide();" />

	</h:form>

</p:dialog>

<p:dialog header="#{msgs.password_alterada}" widgetVar="senhaAlterada"
	closable="false" resizable="false" modal="true"
	style="background-color: #e1e1e1;">
	<p:button value="#{msgs.ok}" outcome="/secured/home.xhtml" />
</p:dialog>

</html>